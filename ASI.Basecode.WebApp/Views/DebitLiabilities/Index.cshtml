@model DebitLiabilitiesViewModel

<!-- Add Account Modal -->
<div id="addAccountModal" class="fixed z-50 inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="bg-white p-6 rounded-lg max-w-md w-full">
        <h2 class="text-xl font-bold mb-4">Add Account</h2>
        <form id="addAccountForm">
            <div class="mb-4">
                <label class="block">Type</label>
                <div class="flex space-x-4">
                    <button type="button" class="w-full p-2 bg-gray-100 text-black" id="addDebitType">Debit</button>
                    <button type="button" class="w-full p-2 bg-gray-100 text-black" id="addBorrowedType">Borrowed</button>
                </div>
            </div>
            <div id="addFormFields">
                <!-- Form fields will be dynamically loaded here based on type -->
            </div>
            <div class="text-right mt-4">
                <button type="submit" class="px-4 py-2 bg-blue-500 text-white">Confirm</button>
            </div>
        </form>
    </div>
</div>

<!-- Edit Account Modal -->
<div id="editAccountModal" class="fixed z-50 inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="bg-white p-6 rounded-lg max-w-md w-full">
        <h2 class="text-xl font-bold mb-4">Edit Account</h2>
        <form id="editAccountForm">
            <div class="mb-4">
                <label class="block">Type</label>
                <div class="flex space-x-4">
                    <button type="button" class="w-full p-2 bg-gray-100 text-black" id="editDebitType">Debit</button>
                    <button type="button" class="w-full p-2 bg-gray-100 text-black" id="editBorrowedType">Borrowed</button>
                </div>
            </div>
            <div id="editFormFields">
                <!-- Form fields will be dynamically loaded here based on type -->
            </div>
            <div class="text-right mt-4">
                <button type="submit" class="px-4 py-2 bg-blue-500 text-white">Save</button>
                <button type="button" id="deleteAccount" class="px-4 py-2 bg-red-500 text-white">Delete</button>
            </div>
        </form>
    </div>
</div>



<div class="p-4">
    <h1 class="text-2xl font-bold">Net Worth: ₱@Model.TotalNetWorth</h1>

    <!-- Debit Accounts -->
    <h2 class="text-xl font-semibold mt-4">Debit Accounts</h2>
    <div class="grid grid-cols-3 gap-4">
        @foreach (var account in Model.DebitAccounts)
        {
            <div class="p-4 bg-green-100 rounded-lg">
                <h3 class="font-bold">@account.Name</h3>
                <p>Balance: ₱@account.Balance</p>
                <p><i class="@account.Icon"></i></p>
                <a href="@Url.Action("Edit", new { id = account.Id })" class="text-blue-500">Edit</a> |
                <a href="@Url.Action("Delete", new { id = account.Id })" class="text-red-500">Delete</a>
            </div>
        }
    </div>

    <!-- Liabilities -->
    <h2 class="text-xl font-semibold mt-4">Liabilities</h2>
    <div class="grid grid-cols-3 gap-4">
        @foreach (var liability in Model.Liabilities)
        {
            <div class="p-4 bg-red-100 rounded-lg">
                <h3 class="font-bold">@liability.Name</h3>
                <p>Amount: ₱@liability.Amount</p>
            </div>
        }
    </div>

    <!-- Add Account Button -->
    <div class="text-right">
        <button id="addAccountButton" class="px-4 py-2 bg-blue-500 text-white rounded-lg">Add Account</button>
    </div>

    @foreach (var account in Model.DebitAccounts)
    {
        <div class="p-4 bg-green-100 rounded-lg">
            <h3 class="font-bold">@account.Name</h3>
            <p>Balance: ₱@account.Balance</p>
            <p><i class="@account.Icon"></i></p>
            <button class="editAccountButton text-blue-500">Edit</button>
        </div>
    }


</div>

<script>
    // Modal Elements
    const addAccountModal = document.getElementById('addAccountModal');
    const editAccountModal = document.getElementById('editAccountModal');

    // Buttons to open modals
    const addAccountButton = document.getElementById('addAccountButton');
    const editAccountButtons = document.querySelectorAll('.editAccountButton');

    // Close modals
    function closeModal(modal) {
        modal.classList.add('hidden');
    }

    // Open modals
    function openModal(modal) {
        modal.classList.remove('hidden');
    }

    // Open Add Account Modal
    addAccountButton.addEventListener('click', () => {
        openModal(addAccountModal);
    });

    // Open Edit Account Modal
    editAccountButtons.forEach(button => {
        button.addEventListener('click', () => {
            // Load the account data (implement logic to load account data here)
            openModal(editAccountModal);
        });
    });

    // Form fields handling for Add Account
    const addFormFields = document.getElementById('addFormFields');
    const addDebitType = document.getElementById('addDebitType');
    const addBorrowedType = document.getElementById('addBorrowedType');

    addDebitType.addEventListener('click', () => {
        addFormFields.innerHTML = `
                <div class="mb-4">
                    <label class="block">Name</label>
                    <input type="text" class="border p-2 w-full" required />
                </div>
                <div class="mb-4">
                    <label class="block">Balance</label>
                    <input type="number" class="border p-2 w-full" required />
                </div>
                <div class="mb-4">
                    <label class="block">Icon</label>
                    <input type="text" class="border p-2 w-full" required />
                </div>
                <div class="mb-4">
                    <label class="block">Color</label>
                    <input type="color" class="border p-2 w-full" required />
                </div>
            `;
    });

    addBorrowedType.addEventListener('click', () => {
        addFormFields.innerHTML = `
                <div class="mb-4">
                    <label class="block">Name</label>
                    <input type="text" class="border p-2 w-full" required />
                </div>
                <div class="mb-4">
                    <label class="block">Amount Borrowed</label>
                    <input type="number" class="border p-2 w-full" required />
                </div>
                <div class="mb-4">
                    <label class="block">Destination Account</label>
                    <select class="border p-2 w-full" required>
                        <!-- Populate this dynamically -->
                        <option value="1">Account 1</option>
                        <option value="2">Account 2</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block">Happening Date</label>
                    <input type="date" class="border p-2 w-full" required />
                </div>
                <div class="mb-4">
                    <label class="block">Due Date</label>
                    <input type="date" class="border p-2 w-full" required />
                </div>
            `;
    });
</script>

